(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{285:(e,s,t)=>{"use strict";t.d(s,{$:()=>d});var r=t(5155),a=t(2115),i=t(9708),n=t(2085),l=t(9434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,s)=>{let{className:t,variant:a,size:n,asChild:d=!1,...c}=e,u=d?i.DX:"button";return(0,r.jsx)(u,{className:(0,l.cn)(o({variant:a,size:n,className:t})),ref:s,...c})});d.displayName="Button"},697:(e,s,t)=>{"use strict";var r;t.d(s,{AT:()=>n,hD:()=>i});let a=(null==(r=t(7358).env.NEXT_PUBLIC_API_BASE_URL)?void 0:r.replace(/\/$/,""))||"http://localhost:4000";class i extends Error{constructor(e,s,t){super(e),this.name="ApiError",this.status=s,this.data=t}}async function n(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat(a).concat(e.startsWith("/")?e:"/".concat(e)),r=new Headers(s.headers||{});s.body instanceof FormData||r.set("Content-Type","application/json"),r.set("Accept","application/json"),s.token&&r.set("Authorization","Bearer ".concat(s.token));let n=await fetch(t,{...s,headers:r,next:{revalidate:0}}),l=n.headers.get("content-type"),o=(null==l?void 0:l.includes("application/json"))?await n.json():void 0;if(!n.ok)throw new i((null==o?void 0:o.message)||"Request failed with status ".concat(n.status),n.status,o);return o}},1776:(e,s,t)=>{"use strict";t.d(s,{AuthProvider:()=>c,Z:()=>u});var r=t(5155),a=t(2115);let i="anonymous-social-session";function n(e){localStorage.setItem(i,JSON.stringify(e))}function l(){localStorage.removeItem(i)}var o=t(2370);let d=(0,a.createContext)(void 0);function c(e){let{children:s}=e,[t,c]=(0,a.useState)(null),[u,f]=(0,a.useState)(null),[m,x]=(0,a.useState)(!0),[h,p]=(0,a.useState)(null),j=(0,a.useCallback)(async()=>{let e=function(){let e=localStorage.getItem(i);if(!e)return null;try{return JSON.parse(e)}catch(e){return localStorage.removeItem(i),null}}();if(!e)return void x(!1);c(e.user),f(e.token);try{let s=await (0,o.rQ)(e.token);c(s),n({token:e.token,user:s}),p(null)}catch(e){console.error("[AuthProvider] Failed to refresh user",e),l(),c(null),f(null),p("Session expired. Please sign in again.")}finally{x(!1)}},[]);(0,a.useEffect)(()=>{j()},[j]);let g=(0,a.useCallback)(e=>{n(e),c(e.user),f(e.token),p(null)},[]),y=(0,a.useCallback)(()=>{l(),c(null),f(null)},[]),v=(0,a.useCallback)(async()=>{if(u)try{x(!0);let e=await (0,o.rQ)(u);c(e),n({token:u,user:e}),p(null)}catch(e){console.error("[AuthProvider] refreshUser failed",e),y()}finally{x(!1)}},[u,y]),N=(0,a.useMemo)(()=>({user:t,token:u,loading:m,error:h,setSession:g,signOut:y,refreshUser:v}),[t,u,m,h,g,y,v]);return(0,r.jsx)(d.Provider,{value:N,children:s})}function u(){let e=(0,a.useContext)(d);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e}},2370:(e,s,t)=>{"use strict";t.d(s,{Hh:()=>a,Jv:()=>i,rQ:()=>n});var r=t(697);async function a(e){return(0,r.AT)("/api/auth/signup",{method:"POST",body:JSON.stringify(e)})}async function i(e){return(0,r.AT)("/api/auth/login",{method:"POST",body:JSON.stringify(e)})}async function n(e){return(await (0,r.AT)("/api/auth/me",{method:"GET",token:e})).user}},2523:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var r=t(5155),a=t(2115),i=t(9434);let n=a.forwardRef((e,s)=>{let{className:t,type:a,...n}=e;return(0,r.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});n.displayName="Input"},3393:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>S});var r=t(5155),a=t(6695),i=t(285),n=t(2523),l=t(5057),o=t(2115),d=t(4884),c=t(9434);let u=o.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(d.bL,{className:(0,c.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...a,ref:s,children:(0,r.jsx)(d.zi,{className:(0,c.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});u.displayName=d.bL.displayName;var f=t(8539),m=t(1031),x=t(9556),h=t(7381),p=t(518);let j=m.bL;m.YJ;let g=m.WT,y=o.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(m.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[a,(0,r.jsx)(m.In,{asChild:!0,children:(0,r.jsx)(x.A,{className:"h-4 w-4 opacity-50"})})]})});y.displayName=m.l9.displayName;let v=o.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(m.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})});v.displayName=m.PP.displayName;let N=o.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(m.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,r.jsx)(x.A,{className:"h-4 w-4"})})});N.displayName=m.wn.displayName;let b=o.forwardRef((e,s)=>{let{className:t,children:a,position:i="popper",...n}=e;return(0,r.jsx)(m.ZL,{children:(0,r.jsxs)(m.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...n,children:[(0,r.jsx)(v,{}),(0,r.jsx)(m.LM,{className:(0,c.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(N,{})]})})});b.displayName=m.UC.displayName,o.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(m.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a})}).displayName=m.JU.displayName;let w=o.forwardRef((e,s)=>{let{className:t,children:a,...i}=e;return(0,r.jsxs)(m.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(m.VF,{children:(0,r.jsx)(p.A,{className:"h-4 w-4"})})}),(0,r.jsx)(m.p4,{children:a})]})});w.displayName=m.q7.displayName,o.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(m.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",t),...a})}).displayName=m.wv.displayName;var k=t(4050);let C=o.forwardRef((e,s)=>{let{className:t,orientation:a="horizontal",decorative:i=!0,...n}=e;return(0,r.jsx)(k.b,{ref:s,decorative:i,orientation:a,className:(0,c.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",t),...n})});C.displayName=k.b.displayName;var R=t(1776),A=t(1721),T=t(6931),J=t(5731),P=t(2733);function S(){let{user:e}=(0,R.Z)();return e?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Settings"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage your account settings and preferences"})]}),(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(A.A,{className:"h-5 w-5"}),(0,r.jsx)(a.ZB,{children:"Profile Settings"})]}),(0,r.jsx)(a.BT,{children:"Update your personal information and profile details"})]}),(0,r.jsxs)(a.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"displayName",children:"Display Name"}),(0,r.jsx)(n.p,{id:"displayName",placeholder:"Your display name",defaultValue:e.displayName||""})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"email",children:"Email"}),(0,r.jsx)(n.p,{id:"email",type:"email",defaultValue:e.email,disabled:!0})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"bio",children:"Bio"}),(0,r.jsx)(f.T,{id:"bio",placeholder:"Tell us about yourself",className:"min-h-[100px]"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"location",children:"Location"}),(0,r.jsx)(n.p,{id:"location",placeholder:"Where are you based?"})]}),(0,r.jsx)(i.$,{children:"Save Changes"})]})]}),(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(T.A,{className:"h-5 w-5"}),(0,r.jsx)(a.ZB,{children:"Notification Settings"})]}),(0,r.jsx)(a.BT,{children:"Configure how you receive notifications"})]}),(0,r.jsxs)(a.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(l.J,{children:"Email Notifications"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),(0,r.jsx)(u,{})]}),(0,r.jsx)(C,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(l.J,{children:"Push Notifications"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receive push notifications in your browser"})]}),(0,r.jsx)(u,{defaultChecked:!0})]}),(0,r.jsx)(C,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(l.J,{children:"Like Notifications"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when someone likes your posts"})]}),(0,r.jsx)(u,{defaultChecked:!0})]}),(0,r.jsx)(C,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(l.J,{children:"Comment Notifications"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when someone comments on your posts"})]}),(0,r.jsx)(u,{defaultChecked:!0})]}),(0,r.jsx)(C,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(l.J,{children:"Follow Notifications"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Get notified when someone follows you"})]}),(0,r.jsx)(u,{defaultChecked:!0})]})]})]}),(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(J.A,{className:"h-5 w-5"}),(0,r.jsx)(a.ZB,{children:"Privacy Settings"})]}),(0,r.jsx)(a.BT,{children:"Control your privacy and security preferences"})]}),(0,r.jsxs)(a.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(l.J,{children:"Private Profile"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Make your profile visible to followers only"})]}),(0,r.jsx)(u,{})]}),(0,r.jsx)(C,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(l.J,{children:"Show Email"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Display your email address on your profile"})]}),(0,r.jsx)(u,{})]}),(0,r.jsx)(C,{}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsx)(l.J,{children:"Allow Message Requests"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Allow others to send you message requests"})]}),(0,r.jsx)(u,{defaultChecked:!0})]})]})]}),(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(P.A,{className:"h-5 w-5"}),(0,r.jsx)(a.ZB,{children:"Appearance"})]}),(0,r.jsx)(a.BT,{children:"Customize how WhisperNet looks to you"})]}),(0,r.jsxs)(a.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"theme",children:"Theme"}),(0,r.jsxs)(j,{defaultValue:"system",children:[(0,r.jsx)(y,{children:(0,r.jsx)(g,{})}),(0,r.jsxs)(b,{children:[(0,r.jsx)(w,{value:"light",children:"Light"}),(0,r.jsx)(w,{value:"dark",children:"Dark"}),(0,r.jsx)(w,{value:"system",children:"System"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(l.J,{htmlFor:"language",children:"Language"}),(0,r.jsxs)(j,{defaultValue:"en",children:[(0,r.jsx)(y,{children:(0,r.jsx)(g,{})}),(0,r.jsxs)(b,{children:[(0,r.jsx)(w,{value:"en",children:"English"}),(0,r.jsx)(w,{value:"es",children:"Espa\xf1ol"}),(0,r.jsx)(w,{value:"fr",children:"Fran\xe7ais"}),(0,r.jsx)(w,{value:"de",children:"Deutsch"})]})]})]})]})]}),(0,r.jsxs)(a.Zp,{className:"border-destructive",children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsx)(a.ZB,{className:"text-destructive",children:"Danger Zone"}),(0,r.jsx)(a.BT,{children:"Irreversible and destructive actions"})]}),(0,r.jsx)(a.Wu,{className:"space-y-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border border-destructive rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium",children:"Delete Account"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your account and all data"})]}),(0,r.jsx)(i.$,{variant:"destructive",size:"sm",children:"Delete Account"})]})})]})]})}):(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)(a.Zp,{className:"max-w-2xl mx-auto",children:(0,r.jsx)(a.Wu,{className:"text-center p-8",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Please log in to access settings."})})})})}},5057:(e,s,t)=>{"use strict";t.d(s,{J:()=>d});var r=t(5155),a=t(2115),i=t(2797),n=t(2085),l=t(9434);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)(i.b,{ref:s,className:(0,l.cn)(o(),t),...a})});d.displayName=i.b.displayName},5925:(e,s,t)=>{Promise.resolve().then(t.bind(t,3393))},6695:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>l,wL:()=>u});var r=t(5155),a=t(2115),i=t(9434);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});n.displayName="Card";let l=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...a})});c.displayName="CardContent";let u=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...a})});u.displayName="CardFooter"},8539:(e,s,t)=>{"use strict";t.d(s,{T:()=>n});var r=t(5155),a=t(2115),i=t(9434);let n=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,r.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...a})});n.displayName="Textarea"},9434:(e,s,t)=>{"use strict";t.d(s,{E:()=>l,cn:()=>i,f:()=>n});var r=t(2596),a=t(9688);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.QP)((0,r.$)(s))}function n(e){try{let s=new Date(e),t=new Date().getTime()-s.getTime(),r=Math.floor(t/1e3),a=Math.floor(r/60),i=Math.floor(a/60),n=Math.floor(i/24),l=Math.floor(n/7),o=Math.floor(n/30),d=Math.floor(n/365);if(r<60)return"just now";if(a<60)return"".concat(a,"m ago");if(i<24)return"".concat(i,"h ago");else if(n<7)return"".concat(n,"d ago");else if(l<4)return"".concat(l,"w ago");else if(o<12)return"".concat(o,"mo ago");else return"".concat(d,"y ago")}catch(e){return"unknown time"}}function l(e,s){return e.length<=s?e:e.slice(0,s).trim()+"..."}}},e=>{var s=s=>e(e.s=s);e.O(0,[352,620,923,284,441,684,358],()=>s(5925)),_N_E=e.O()}]);